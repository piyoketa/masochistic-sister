## Field レベルインデックス整合性 改訂計画

### 現状と課題
- `currentLevelIndex` は 0 から始まり、`nextLevelIndex = currentLevelIndex + 1`。
- スタートマスを含むレベルも level=1 として保持されているが、到達判定や UI 表示に特例が混在していた。
- 今回の修正で `isReachable` を「現在レベル未クリアノードは到達可」「次レベルは nextNodeIndices に従う」へ統一し、特例を撤廃したが、仕様意図を文書に残したい。

### 目標
- レベル表示（1-based）と内部インデックス（0-based）のズレを理解しやすくし、スタートマスを含む全レベルを通常フローで扱う。
- `currentLevelIndex`/`nextLevelIndex` を軸にした到達判定ロジックを明文化する。
- 今後レベル追加・分岐追加時も特例なしで拡張できるようにする。

### 合意済み仕様
- インデックス: 0-based（配列 index）、表示 level は 1-based（フィールド定義の `level` 値）。
- 到達判定:
  - デバッグ ON: 全マス到達可。
  - 現在レベル (`levelIndex === currentLevelIndex`): 未クリアノードは到達可。
  - 次レベル (`levelIndex === nextLevelIndex`): `currentNode.nextNodeIndices` に含まれるノードのみ到達可。
  - それ以外のレベル: 到達不可。
- クリア状態:
  - 初期状態ではスタートマスは未クリア。進入後に通常のクリア処理で登録する。
  - クリア済みノードは到達不可（デバッグを除く）。
- UI:
  - 「進む」ボタンは `isReachable` が true のときのみ表示。
  - 「状態: 未クリア」は表示せず、クリア時のみ「状態: クリア」を表示。

### 今後の拡張指針
- レベル分岐や追加を行う場合も、`nextNodeIndices` を正しく設定すれば特例なく動作。
- スタートマス以外に「帰還」や「分岐戻り」の概念を入れる場合は、`reachableNextNodes` の計算を拡張する形で対応し、`isReachable` のルールは維持する。

この内容で進行中の実装方針と乖離がないかご確認ください。問題なければこの計画を最新の仕様メモとして運用します。
